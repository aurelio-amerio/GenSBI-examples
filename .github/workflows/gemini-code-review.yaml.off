name: Auto-Trigger Gemini Review ðŸ”¬
on:
  pull_request:
    types: [synchronize] # This triggers specifically when new commits are pushed to an open PR

permissions: {}

jobs:
  trigger-review:
    runs-on: ubuntu-latest
    steps:
      - name: Post Gemini Command
        # Uses the GitHub CLI to post the comment
        run: |
          gh pr comment ${{ github.event.pull_request.number }} --body "@gemini-code-assist /gemini summary" --repo ${{ github.repository }}
          gh pr comment ${{ github.event.pull_request.number }} --body "@gemini-code-assist /gemini review" --repo ${{ github.repository }}
        env:
          # Crucial: This must be a PAT from a human account, NOT the default GITHUB_TOKEN
          GH_TOKEN: ${{ secrets.GEMINI_CODE_ASSIST_SECRET }}
